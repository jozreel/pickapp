<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<dom-module id="ajax-parser">
 
  <template>
    <div id="content"></div>
    
      <iron-ajax  content-type = "application/json"  id = 'ajxiron' method='[[method]]' url="[[jsonurl]]"  debounce-duration='300' on-response="handleResp">
  </template>
</dom-module>

<script>

    Polymer({
      is: 'ajax-parser',

      properties: {
          method: {
          type: String,
          value: 'POST',
         // observer: 'sizeChanged'
        },
        jsonstring:{type: String, value: '{"has":"none"}'},
        jsonurl:{type:String, value:'localhost'},
        respfunc:Object,
        rspelement:Object,
      submit:{type:Boolean, value:false, observer:'submitChange'}
      },
     

      submitChange: function() {
        
        if(this.submit ===true)
        {
           //alert(this.$.ajxiron.url);
           this.$.ajxiron.body = this.jsonstring;
           //console.log(this.jsonstring);
           this.$.ajxiron.generateRequest();
        }
        
      },
    handleResp:function(e)
    {    
      
      var stringf = e.detail.response;
       
      this.respfunc(stringf, this.rspelement);
     
    }
    });
</script>
